# Game Implementation Explanation

This presentation will walk you through the JavaScript code responsible for a simple interactive game. The game involves memorizing and repeating a sequence of colors.

#### **Create a file named "game.js"**

## Variable Initialization

```javascript
// Array of color options for the game buttons.
var buttonColours = ['red', 'blue', 'green', 'yellow'];

// Array to store the sequence generated by the game.
var gamePattern = [];

// Array to store the sequence of user button clicks.
var userClickedPattern = [];

// Flag to indicate whether the game has started.
var started = false;

// Variable to keep track of the current game level.
var level = 0;
```

## Event Listeners

### Start the Game

```javascript
// Listens for a keypress to start the game.
document.addEventListener('keypress', function () {
  // Checks if the game hasn't started yet.
  if (!started) {
    // Updates the level title with the current level.
    document.getElementById('level-title').textContent = 'Level ' + level;
    // Generates the next sequence.
    nextSequence();
    // Sets the game as started.
    started = true;
    // Removes the 'game-over' class from the body, if it exists.
    document.body.classList.remove('game-over');
  }
});
```

### Handle Button Clicks

```javascript
// Adds click event listeners to all game buttons.
document.querySelectorAll('.btn').forEach(function (btn) {
  btn.addEventListener('click', function () {
    // Checks if the game has started.
    if (started) {
      // Gets the ID of the clicked button, indicating its color.
      var userChosenColour = this.id;
      // Adds the chosen color to the user's pattern.
      userClickedPattern.push(userChosenColour);

      // Plays the corresponding sound for the button.
      playSound(userChosenColour);
      // Animates the button press.
      animatePress(userChosenColour);

      // Checks the user's answer against the game pattern.
      checkAnswer(userClickedPattern.length - 1);
    } else {
      // Temporarily shows the 'game-over' class if the game hasn't started.
      document.body.classList.remove('game-over');
      setTimeout(function () {
        document.body.classList.add('game-over');
      }, 100);
    }
  });
});
```

## Game Logic Functions

### Check Answer

```javascript
// Checks if the user's latest answer matches the game pattern.
function checkAnswer(currentLevel) {
  // Compares the user's answer to the game pattern at the current level.
  if (gamePattern[currentLevel] === userClickedPattern[currentLevel]) {
    // Checks if the last answer completes the current pattern.
    if (userClickedPattern.length === gamePattern.length) {
      // Prepares the next sequence after a short delay.
      setTimeout(function () {
        nextSequence();
      }, 1000);
      // Indicates success to the user.
      document.getElementById('level-title').textContent = 'SUCCESS!!';
    }
  } else {
    // Plays the 'wrong' sound and shows the game over screen on failure.
    playSound('wrong');
    document.body.classList.add('game-over');
    document.getElementById('level-title').innerHTML = '<b>Game Over</b><br><br> Press Any Key to Restart';

    // Resets the game.
    startOver();
  }
}
```

### Generate Next Sequence

```javascript
// Generates the next sequence in the game.
function nextSequence() {
  // Resets the user's pattern for the new level.
  userClickedPattern = [];
  // Increments the game level.
  level++;
  // Updates the level title with the new level.
  document.getElementById('level-title').textContent = 'Level ' + level;
  // Selects a random color from the available options.
  var randomNumber = Math.floor(Math.random() * 4);
  var randomChosenColour = buttonColours[randomNumber];
  // Adds the chosen color to the game pattern.
  gamePattern.push(randomChosenColour);

  // Iterates over the gamePattern array, which contains the sequence of colors to be shown to the player.
for (let i = 0; i < gamePattern.length; i++) {
    // Sets a timeout to create a delay before showing each color in the sequence.  The delay increases with each iteration to show each color one after the other.
    setTimeout(function () {
      // Temporarily sets the opacity of the current element (color) to 0, making it invisible. This is done to create a flashing effect.
      document.getElementById(gamePattern[i]).style.opacity = 0;
      // Sets another timeout to reverse the opacity change after a brief moment. This creates the visual effect of the color flashing.
      setTimeout(function () {
        // Resets the opacity back to 1, making the element (color) visible again. The duration of the element being invisible is set to 100 milliseconds.
        document.getElementById(gamePattern[i]).style.opacity = 1;
      }, 100);
      // The initial timeout is based on the current iteration, creating a staggered effect for each color in the sequence.Each color flashes one after the other with 500ms intervals.
    }, 500 * i);
}

// Logs the current game pattern to the console. This is useful for debugging purposes to see the sequence the game is expecting the user to follow.
console.log('gamePattern:', gamePattern);

```

### Animate Button Press

```javascript
// Animates a button press with visual feedback.
function animatePress(currentColor) {
  // Retrieve the button element using its color ID.
  var element = document.getElementById(currentColor);

  // Add the 'pressed' class to the element to change its appearance.
  element.classList.add('pressed');

  // Set a timeout to remove the 'pressed' class after 100 milliseconds.
  // This creates a quick visual press-and-release effect.
  setTimeout(function () {
    element.classList.remove('pressed');
  }, 100);
}
```

### Play Sound

```javascript
// Plays a sound corresponding to the button color.
function playSound(name) {
  // Create a new audio object with the path to the sound file.
  // The path assumes there is a 'sounds' directory containing mp3 files named after the button colors.
  var audio = new Audio('sounds/' + name + '.mp3');

  // Play the sound.
  audio.play();
}
```

### Start Over

```javascript
// Resets the game to its initial state after a game over.
function startOver() {
  // Reset the level to 0, indicating the start of a new game.
  level = 0;

  // Clear the game pattern array, removing all previous sequence data.
  gamePattern = [];

  // Set the started flag to false, indicating the game is not currently in progress.
  started = false;
}
```

This concludes the explanation of the game's JavaScript implementation. Each function and variable plays a crucial role in creating an engaging and interactive game experience.
